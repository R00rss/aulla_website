---
import Perrito from "@/assets/images/perrito.webp";
import AnimalCard from "@/components/home/AnimalCard.astro";

const title =
  "A través de la esterilización, la alimentación y la atención médica de emergencia, buscamos mejorar la vida de los perros callejeros en todo el mundo.";

const statistics = [
  {
    label: "Perros alimentados a diario",
    value: "250+",
    description:
      "Cada día se cocina comida fresca y saludable que se sirve a más de 800 perros en Aulla Ecuador",
  },
  {
    label: "Esterilizaciones financiadas",
    value: "500",
    description:
      "La esterilización es lo más importante que podemos hacer para detener el sufrimiento de los animales callejeros.",
  },
  {
    label: "Perros reubicados",
    value: "100+",
    description:
      "Aquellos que no pueden sobrevivir en la calle reciben una segunda oportunidad en un hogar lleno de amor, en Tailandia o en el extranjero.",
  },
];
---

<section class="w-full text-center bg-primary py-10">
  <p
    class="text-light text-2xl xs:text-3xl text-pretty w-11/12 max-w-2xl mx-auto font-comic font-semibold"
  >
    {title}
  </p>
  <section
    class="flex flex-col md:flex-row justify-center items-start pt-14 pb-24 lg:gap-10 overflow-hidden"
  >
    <div
      class="relative w-[500px] h-[300px] mb-5 md:mb-0 mt-2 lg:mt-10 mx-auto md:mx-0"
    >
      <AnimalCard
        title="Max"
        description="Max es un perro juguetón y amigable que busca un hogar lleno de amor."
        date="Disponible desde: 2023-10-01"
        className="absolute left-0 top-0 -rotate-6"
        classNameContainerImage="w-[200px] md:w-[285px]"
        image={Perrito.src}
        rotateLeft
      />
      <AnimalCard
        title="Luna"
        description="Luna es una gata cariñosa y tranquila que adora los mimos."
        date="Disponible desde: 2023-09-15"
        className="absolute right-[20%] md:right-[10%] lg:right-0 top-12 md:top-[80%] lg:top-1/2 rotate-8 md:rotate-6"
        classNameContainerImage="w-[200px] md:w-[285px]"
        image={Perrito.src}
      />
    </div>
    <ul
      class="flex flex-col sm:justify-center items-center w-full md:w-auto gap-10 px-5"
    >
      {
        statistics.map((stat) => (
          <li class=" flex flex-col items-start justify-start text-start">
            <p class="statistic-value text-4xl font-bold text-light">
              {stat.value}
            </p>
            <p class="text-lg font-medium mt-2 text-tertiary">{stat.label}</p>
            <p class="text-base text-light max-w-sm">{stat.description}</p>
          </li>
        ))
      }
    </ul>
  </section>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);

  const values = document.querySelectorAll<HTMLElement>(".statistic-value");
  console.log({ values });
  function init() {
    values.forEach((value) => {
      gsap.from(value, {
        y: 50,
        opacity: 0,
        duration: 0.5,
        scrollTrigger: {
          trigger: value,
          start: "top 80%",
          toggleActions: "play none none reverse",
        },
      });
    });
  }
  function main() {
    init();
  }

  document.addEventListener("DOMContentLoaded", main);
</script>
